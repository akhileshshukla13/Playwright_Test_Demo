const a12_0x3faab4=a12_0x2ee8;(function(_0x5d9d3c,_0x5ecb5a){const _0x2c579d=a12_0x2ee8,_0x4b7f8e=_0x5d9d3c();while(!![]){try{const _0x41585b=parseInt(_0x2c579d(0x166))/0x1*(-parseInt(_0x2c579d(0x161))/0x2)+-parseInt(_0x2c579d(0x192))/0x3*(parseInt(_0x2c579d(0x160))/0x4)+parseInt(_0x2c579d(0x188))/0x5*(parseInt(_0x2c579d(0x1d3))/0x6)+-parseInt(_0x2c579d(0x185))/0x7+-parseInt(_0x2c579d(0x16b))/0x8+-parseInt(_0x2c579d(0x1a7))/0x9+-parseInt(_0x2c579d(0x170))/0xa*(-parseInt(_0x2c579d(0x183))/0xb);if(_0x41585b===_0x5ecb5a)break;else _0x4b7f8e['push'](_0x4b7f8e['shift']());}catch(_0x5f01ce){_0x4b7f8e['push'](_0x4b7f8e['shift']());}}}(a12_0x1edc,0x57e5a));const fs=require('fs'),util=require('util'),request=require('request'),{v4:uuidv4}=require(a12_0x3faab4(0x189)),{HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,global_registry,messageTypes,AG_API_URL,AWS,AZURE}=require(a12_0x3faab4(0x171)),{logger}=require(a12_0x3faab4(0x194)),{getCloudProviderObject}=require(a12_0x3faab4(0x159)),{removeGridComponents,deleteClusterAndDependencies}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a12_0x3faab4(0x1d6)),{inputConfirmation,inputCloudProviderKeys}=require(a12_0x3faab4(0x191)),{createK8sClient}=require(a12_0x3faab4(0x1b3)),{kebabCase,getCredentialsPath,getGridDetails}=require(a12_0x3faab4(0x1ce)),promisifiedRequest=util['promisify'](request);exports[a12_0x3faab4(0x164)]=a12_0x3faab4(0x1ac),exports[a12_0x3faab4(0x195)]=a12_0x3faab4(0x187),exports['builder']=function(_0x40521b){const _0x203571=a12_0x3faab4,_0x49de28={};_0x49de28[_0x203571(0x175)]=_0x203571(0x158),_0x49de28[_0x203571(0x1c7)]=_0x203571(0x1c6),_0x49de28[_0x203571(0x1a8)]=_0x203571(0x1cb);const _0x2f4c55=_0x49de28,_0x1a644a={};_0x1a644a[_0x203571(0x1b2)]=_0x2f4c55[_0x203571(0x175)],_0x1a644a[_0x203571(0x1b8)]=_0x2f4c55[_0x203571(0x1c7)];const _0x33d9e3={};return _0x33d9e3['grid-id']=_0x1a644a,_0x40521b[_0x203571(0x173)](HELP_HEADER_MESSAGE[_0x203571(0x168)])[_0x203571(0x196)](HELP_FOOTER_MESSAGE)[_0x203571(0x165)](_0x33d9e3)[_0x203571(0x1cb)](_0x2f4c55[_0x203571(0x1a8)])[_0x203571(0x16c)];},exports['handler']=async function(_0x33d901){const _0x4ced53=a12_0x3faab4,_0x32a16b={'IqoIL':_0x4ced53(0x1e2),'BABOc':_0x4ced53(0x158),'zZMCZ':'string','BcfJk':_0x4ced53(0x1cb),'OWrOe':function(_0x4aa32b){return _0x4aa32b();},'EPwEH':function(_0x47b072,_0x5ba77a){return _0x47b072===_0x5ba77a;},'ReUjD':_0x4ced53(0x1dd),'GEwwv':_0x4ced53(0x1b0),'YDSuh':function(_0x1bba0b,_0xc4cde6,_0x2bcd3b,_0x184f3d,_0xb36548,_0x3e49e1,_0x2b2032){return _0x1bba0b(_0xc4cde6,_0x2bcd3b,_0x184f3d,_0xb36548,_0x3e49e1,_0x2b2032);},'LeXlJ':'delete-grid-called','DksVw':_0x4ced53(0x186),'CNKrX':function(_0x25f358,_0x55cf13){return _0x25f358!==_0x55cf13;},'jMqwE':_0x4ced53(0x182),'EZbof':function(_0x18ebae){return _0x18ebae();},'NrfAm':function(_0x18b834,_0x439ff2,_0x4a6d8a,_0x488c2b){return _0x18b834(_0x439ff2,_0x4a6d8a,_0x488c2b);},'ibqgI':_0x4ced53(0x167),'SwDBA':_0x4ced53(0x17c),'hbRAf':_0x4ced53(0x1c8),'Nuhyj':function(_0x25b5eb,_0x79b7a7){return _0x25b5eb(_0x79b7a7);},'WlmPN':function(_0x15c1a0,_0x39bd0a){return _0x15c1a0===_0x39bd0a;},'JhsOg':function(_0x2b68c3,_0x302d5){return _0x2b68c3===_0x302d5;},'RWmDk':_0x4ced53(0x174),'ketlf':'dsVkv','loZZw':_0x4ced53(0x19f),'fjQqO':_0x4ced53(0x1ae),'WXERi':function(_0x20faf9,_0xef67ba){return _0x20faf9!==_0xef67ba;},'kOxhq':'kMnZJ','EakdM':function(_0x1f8882,_0x21f552,_0x24a8e7,_0x4514ea){return _0x1f8882(_0x21f552,_0x24a8e7,_0x4514ea);},'JOlhu':function(_0x39fa02,_0x335429){return _0x39fa02===_0x335429;},'NxGSz':_0x4ced53(0x15e),'lrWXb':_0x4ced53(0x1b1),'KfICq':_0x4ced53(0x190),'kJKLJ':_0x4ced53(0x1d1),'rmwsH':_0x4ced53(0x1ba),'HYYPZ':_0x4ced53(0x1e4),'EFnEk':_0x4ced53(0x16f),'varHC':function(_0x216dcc,_0x3c104b,_0x1929a5,_0x141c84,_0x1940cd,_0x5e8cd8){return _0x216dcc(_0x3c104b,_0x1929a5,_0x141c84,_0x1940cd,_0x5e8cd8);},'JulgC':'DELETE','tLDkV':function(_0x11d3d1,_0x5854a2){return _0x11d3d1(_0x5854a2);},'EdlsF':function(_0x1a2f43,_0x1e8a69){return _0x1a2f43!==_0x1e8a69;},'iNcpf':function(_0x47734c,_0x486f76){return _0x47734c===_0x486f76;},'GykEP':_0x4ced53(0x15b),'fleeU':function(_0x1133de,_0x42d88c,_0x5ff2de,_0x1e3e5e,_0x2c97b3,_0x15ba3a,_0x48267d){return _0x1133de(_0x42d88c,_0x5ff2de,_0x1e3e5e,_0x2c97b3,_0x15ba3a,_0x48267d);},'MAhKS':_0x4ced53(0x1de),'DkKnf':function(_0x33c5da,_0x219f30,_0x2976c0,_0x46e26a,_0xfdd2,_0x34ee6c,_0x12c26d){return _0x33c5da(_0x219f30,_0x2976c0,_0x46e26a,_0xfdd2,_0x34ee6c,_0x12c26d);},'YOHrh':_0x4ced53(0x1af),'DcgzE':'unknown-error'};try{global_registry[_0x4ced53(0x16a)]=_0x32a16b['OWrOe'](uuidv4);!fs[_0x4ced53(0x1d8)](_0x32a16b['OWrOe'](getCredentialsPath))&&(_0x32a16b['EPwEH'](_0x32a16b['ReUjD'],_0x32a16b[_0x4ced53(0x179)])?(console['error'](_0x32a16b[_0x4ced53(0x1df)]),await _0x32a16b[_0x4ced53(0x15a)](sendInstrumentationEvent,_0x33d901,_0x32a16b[_0x4ced53(0x1ca)],messageTypes[_0x4ced53(0x180)],_0x32a16b['DksVw'],null,_0x33d901),process[_0x4ced53(0x1a0)](0x1)):_0x2cef20['warn']('Cluster:\x20'+_0x59459f['clusterName']+_0x4ced53(0x169)));_0x32a16b[_0x4ced53(0x15a)](sendInstrumentationEvent,_0x33d901,_0x32a16b['LeXlJ'],messageTypes[_0x4ced53(0x18e)],null,null,_0x33d901);!_0x33d901[_0x4ced53(0x19a)]&&(_0x32a16b[_0x4ced53(0x18d)](_0x32a16b[_0x4ced53(0x1e0)],_0x32a16b[_0x4ced53(0x1e0)])?_0x323178=_0x4ced53(0x17d)+_0x5d15e8['name']+'\x22\x20and\x20ID\x20'+_0x5e5927['id']+_0x4ced53(0x1e3)+_0xc2cc56[_0x4ced53(0x15d)]+_0x4ced53(0x1a5)+_0x27d4bf[_0x4ced53(0x1a6)]+_0x4ced53(0x1b5):(console[_0x4ced53(0x19b)](_0x32a16b[_0x4ced53(0x1be)]),process[_0x4ced53(0x1a0)](0x1)));const _0x5b9fa9=JSON[_0x4ced53(0x18f)](fs[_0x4ced53(0x1a2)](_0x32a16b[_0x4ced53(0x1a1)](getCredentialsPath))),[_0x39853a,_0x27ba3d]=await _0x32a16b[_0x4ced53(0x17e)](getGridDetails,_0x5b9fa9['Browserstack'][_0x4ced53(0x198)],_0x5b9fa9[_0x4ced53(0x167)][_0x4ced53(0x172)],_0x33d901[_0x4ced53(0x19a)]);if(_0x27ba3d){const _0x5f6e1=_0x27ba3d[_0x4ced53(0x1e6)];let _0x42bfa5=_0x4ced53(0x17d)+_0x5f6e1[_0x4ced53(0x176)]+'\x22\x20and\x20ID\x20'+_0x5f6e1['id']+'.\x20Do\x20you\x20want\x20to\x20proceed\x20with\x20deletion?\x20(y/n)',_0x592e69;_0x27ba3d[_0x4ced53(0x1a9)]&&_0x32a16b[_0x4ced53(0x1aa)](_0x27ba3d[_0x4ced53(0x1dc)],_0x32a16b[_0x4ced53(0x1e1)])&&(_0x32a16b[_0x4ced53(0x1aa)](_0x32a16b[_0x4ced53(0x1c9)],_0x32a16b[_0x4ced53(0x1c5)])?(_0xfacd45[_0x4ced53(0x1e6)](_0x4ced53(0x17f)),_0x301567['exit'](0x0)):_0x42bfa5=_0x4ced53(0x17d)+_0x5f6e1[_0x4ced53(0x176)]+_0x4ced53(0x1cf)+_0x5f6e1['id']+'\x20along\x20with\x20Kubernetes\x20Cluster\x20with\x20name\x20\x22'+_0x5f6e1['clusterName']+_0x4ced53(0x1a5)+_0x5f6e1[_0x4ced53(0x1a6)]+_0x4ced53(0x1b5));_0x592e69=await _0x32a16b[_0x4ced53(0x18b)](inputConfirmation,_0x42bfa5);(_0x32a16b[_0x4ced53(0x1aa)](_0x592e69,undefined)||_0x32a16b[_0x4ced53(0x1aa)](_0x592e69,null)||!(_0x32a16b[_0x4ced53(0x18a)](_0x592e69[_0x4ced53(0x181)](),'y')||_0x32a16b['EPwEH'](_0x592e69[_0x4ced53(0x181)](),'n')))&&(_0x32a16b[_0x4ced53(0x16e)](_0x32a16b[_0x4ced53(0x1cd)],_0x32a16b[_0x4ced53(0x1c4)])?(_0x840447[_0x4ced53(0x19b)](_0x32a16b[_0x4ced53(0x1be)]),_0x556db4['exit'](0x1)):(console[_0x4ced53(0x19b)](_0x32a16b[_0x4ced53(0x17b)]),await _0x32a16b[_0x4ced53(0x15a)](sendInstrumentationEvent,_0x33d901,_0x32a16b[_0x4ced53(0x1ca)],messageTypes[_0x4ced53(0x180)],_0x32a16b[_0x4ced53(0x178)],null,_0x33d901),process[_0x4ced53(0x1a0)](0x1)));if(_0x32a16b[_0x4ced53(0x18a)](_0x592e69[_0x4ced53(0x181)](),'n')){if(_0x32a16b[_0x4ced53(0x19e)](_0x32a16b[_0x4ced53(0x19d)],_0x32a16b[_0x4ced53(0x19d)])){const _0x461e75={};_0x461e75['description']=_0x32a16b[_0x4ced53(0x197)],_0x461e75[_0x4ced53(0x1b8)]=_0x32a16b['zZMCZ'];const _0x4d4e15={};return _0x4d4e15[_0x4ced53(0x1d9)]=_0x461e75,_0x5b8675[_0x4ced53(0x173)](_0x449f35[_0x4ced53(0x168)])[_0x4ced53(0x196)](_0x81566f)[_0x4ced53(0x165)](_0x4d4e15)[_0x4ced53(0x1cb)](_0x32a16b[_0x4ced53(0x184)])[_0x4ced53(0x16c)];}else process['exit'](0x0);}global_registry[_0x4ced53(0x1e5)]=_0x5f6e1['region'];const _0x550f58=_0x5f6e1[_0x4ced53(0x1d5)],_0x912d38=_0x32a16b['EakdM'](getCloudProviderObject,_0x550f58,_0x5f6e1[_0x4ced53(0x15d)],_0x5f6e1['name']),_0x273950=_0x5b9fa9['cloudProvider'];if(_0x32a16b[_0x4ced53(0x16e)](_0x273950[_0x550f58],undefined)){if(_0x32a16b['JOlhu'](_0x32a16b[_0x4ced53(0x1e7)],_0x32a16b[_0x4ced53(0x1a3)]))_0x2a6909[_0x4ced53(0x1d5)]={};else{logger[_0x4ced53(0x1e6)](_0x32a16b[_0x4ced53(0x1ad)]);_0x32a16b['WlmPN'](_0x5b9fa9['cloudProvider'],undefined)&&(_0x32a16b[_0x4ced53(0x1aa)](_0x32a16b[_0x4ced53(0x1bf)],_0x32a16b[_0x4ced53(0x1c2)])?_0xbe90d8['exit'](0x0):_0x5b9fa9['cloudProvider']={});_0x5b9fa9[_0x4ced53(0x1d5)][_0x550f58]={};const _0x3afe70=await _0x32a16b[_0x4ced53(0x193)](inputCloudProviderKeys,_0x550f58,_0x5b9fa9,_0x912d38);fs[_0x4ced53(0x1c0)](_0x32a16b[_0x4ced53(0x1bc)](getCredentialsPath),JSON['stringify'](_0x3afe70)),logger[_0x4ced53(0x1bb)](_0x32a16b['HYYPZ']);}}else logger[_0x4ced53(0x1e6)](_0x32a16b[_0x4ced53(0x1d2)]),await _0x912d38[_0x4ced53(0x199)](_0x273950);_0x912d38['configureIfNotConfigured']();const _0x423fc8=_0x32a16b[_0x4ced53(0x18b)](kebabCase,_0x5f6e1[_0x4ced53(0x176)]),[_0x2a1f06,_0x5690c3,_0x2ab967,_0x4461b7,_0x32dd7d,_0x18389a]=await _0x32a16b[_0x4ced53(0x18b)](createK8sClient,_0x912d38);await _0x32a16b[_0x4ced53(0x1c1)](removeGridComponents,_0x2a1f06,_0x5690c3,_0x2ab967,_0x4461b7,_0x423fc8);if(_0x27ba3d[_0x4ced53(0x1a9)]){const _0x3f0363=await _0x912d38['isBrowserstackCluster']();_0x3f0363?await _0x912d38[_0x4ced53(0x1db)](_0x2a1f06,_0x5f6e1[_0x4ced53(0x1cc)]):logger[_0x4ced53(0x162)](_0x4ced53(0x1a4)+_0x5f6e1[_0x4ced53(0x15d)]+_0x4ced53(0x169));}const _0x4ca625=_0x4ced53(0x1b4)+AG_API_URL+_0x4ced53(0x1e9)+_0x33d901['gridId'],_0x2f27b9={};_0x2f27b9[_0x4ced53(0x198)]=_0x5b9fa9[_0x4ced53(0x167)][_0x4ced53(0x198)],_0x2f27b9[_0x4ced53(0x172)]=_0x5b9fa9[_0x4ced53(0x167)][_0x4ced53(0x172)];const _0x3b8950={};_0x3b8950[_0x4ced53(0x177)]=_0x4ca625,_0x3b8950['method']=_0x32a16b[_0x4ced53(0x1c3)],_0x3b8950[_0x4ced53(0x163)]=_0x2f27b9;const _0x9eb7ec=_0x3b8950,_0x5f5b28=await _0x32a16b[_0x4ced53(0x1b9)](promisifiedRequest,_0x9eb7ec);_0x32a16b[_0x4ced53(0x19e)](_0x5f5b28,null)&&_0x32a16b[_0x4ced53(0x16d)](_0x5f5b28,undefined)&&_0x32a16b[_0x4ced53(0x17a)](_0x5f5b28[_0x4ced53(0x1b6)],0xc8)&&(logger[_0x4ced53(0x1e6)]('Succesfully\x20deleted\x20the\x20grid'),process['exit'](0x0)),logger[_0x4ced53(0x19b)](_0x4ced53(0x1d0)+JSON[_0x4ced53(0x19c)](_0x5f5b28)),await _0x32a16b[_0x4ced53(0x15a)](sendInstrumentationEvent,_0x33d901,_0x32a16b[_0x4ced53(0x1ca)],messageTypes[_0x4ced53(0x180)],_0x32a16b[_0x4ced53(0x1b7)],_0x39853a,_0x33d901),process[_0x4ced53(0x1a0)](0x1);}_0x32a16b[_0x4ced53(0x17a)](_0x39853a[_0x4ced53(0x1b6)],0x191)&&(logger[_0x4ced53(0x19b)](_0x4ced53(0x1d4)),await _0x32a16b[_0x4ced53(0x15f)](sendInstrumentationEvent,_0x33d901,_0x32a16b[_0x4ced53(0x1ca)],messageTypes[_0x4ced53(0x180)],_0x32a16b[_0x4ced53(0x15c)],null,_0x33d901),process[_0x4ced53(0x1a0)](0x1)),_0x32a16b[_0x4ced53(0x18a)](_0x39853a[_0x4ced53(0x1b6)],0x190)&&(logger['error'](JSON[_0x4ced53(0x18f)](_0x39853a[_0x4ced53(0x1bd)])['message']),await _0x32a16b[_0x4ced53(0x1d7)](sendInstrumentationEvent,_0x33d901,_0x32a16b[_0x4ced53(0x1ca)],messageTypes[_0x4ced53(0x180)],_0x32a16b[_0x4ced53(0x1ab)],null,_0x33d901),process[_0x4ced53(0x1a0)](0x1)),logger[_0x4ced53(0x19b)](_0x4ced53(0x18c)+JSON[_0x4ced53(0x19c)](_0x39853a)),await _0x32a16b[_0x4ced53(0x15f)](sendInstrumentationEvent,_0x33d901,_0x32a16b[_0x4ced53(0x1ca)],messageTypes['ERROR'],_0x32a16b['GykEP'],_0x39853a,_0x33d901),process[_0x4ced53(0x1a0)](0x1);}catch(_0x45247a){logger['error'](_0x4ced53(0x1e8)+_0x45247a[_0x4ced53(0x1da)]),await _0x32a16b[_0x4ced53(0x1d7)](sendInstrumentationEvent,_0x33d901,_0x32a16b[_0x4ced53(0x1ca)],messageTypes[_0x4ced53(0x180)],_0x32a16b['DcgzE'],_0x45247a,_0x33d901),process[_0x4ced53(0x1a0)](0x1);}};function a12_0x2ee8(_0x49b4ae,_0x418f77){const _0x1edc0e=a12_0x1edc();return a12_0x2ee8=function(_0x2ee89f,_0x2ebf01){_0x2ee89f=_0x2ee89f-0x158;let _0x386ead=_0x1edc0e[_0x2ee89f];return _0x386ead;},a12_0x2ee8(_0x49b4ae,_0x418f77);}function a12_0x1edc(){const _0x4ed361=['\x20is\x20not\x20created\x20by\x20Browserstack.\x20Skipping\x20deletion\x20of\x20this\x20cluster','requestId','5639312DkLTtJ','argv','EdlsF','JhsOg','Found\x20credentials\x20for\x20cloud\x20provider\x20locally.\x20Using\x20them\x20for\x20performing\x20actions','30auXPBK','../../config/constants','password','usage','pIZnU','kdURG','name','url','fjQqO','ReUjD','iNcpf','loZZw','HPXkm','This\x20will\x20delete\x20the\x20Grid\x20with\x20name\x20\x22','NrfAm','Succesfully\x20deleted\x20the\x20grid','ERROR','toLowerCase','OaBcY','7078060renska','BcfJk','4135607nhLPFZ','init-not-called','Delete\x20an\x20Automation\x20grid.','1865XzSHDL','uuid','WlmPN','Nuhyj','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','CNKrX','INFO','parse','Unable\x20to\x20fetch\x20credentials\x20for\x20cloud\x20provider\x20locally','../../utils/userInput','833649jJAzTM','EakdM','../../config/logger','desc','epilogue','BABOc','username','fetchLocalCreds','gridId','error','stringify','kOxhq','WXERi','Wrong\x20input!\x20Please\x20try\x20again\x20with\x20a\x20valid\x20input.','exit','EZbof','readFileSync','lrWXb','Cluster:\x20','\x22\x20with\x20ID\x20','clusterId','4545963rOFcXr','tjMDZ','onlyGridInCluster','EPwEH','YOHrh','grid','KfICq','invalid-input','invalid-grid-id','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','lSwCG','description','../../utils/createk8sClient','https://','.\x20Do\x20you\x20want\x20to\x20proceed\x20with\x20deletion?\x20(y/n)','statusCode','GykEP','type','tLDkV','PSBrs','debug','OWrOe','body','IqoIL','kJKLJ','writeFileSync','varHC','rmwsH','JulgC','ketlf','hbRAf','string','xCqVM','NWSAm','SwDBA','LeXlJ','help','region','RWmDk','../../utils/utilityMethods','\x22\x20and\x20ID\x20','Grid\x20is\x20deleted\x20but\x20failed\x20to\x20update\x20server\x20for\x20grid\x20deletion.\x20Response\x20from\x20server:\x20','GzMjG','EFnEk','10452CSLWXp','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','cloudProvider','../../utils/instrumentationUtils','DkKnf','existsSync','grid-id','stack','deleteCluster','clusterSpawnedVia','YKROe','unauthorised','GEwwv','jMqwE','ibqgI','Grid\x20ID\x20not\x20passed.\x20Please\x20provide\x20a\x20Grid\x20ID\x20to\x20delete\x20using\x20--grid-id\x20option','\x20along\x20with\x20Kubernetes\x20Cluster\x20with\x20name\x20\x22','Saving\x20credentials\x20for\x20cloud\x20provider\x20locally\x20for\x20later\x20runs','clusterRegion','info','NxGSz','Failed\x20to\x20delete\x20resources!\x20Error:\x20','/packages/cli/grid/','Pass\x20the\x20ID\x20of\x20the\x20Grid','../../cloudproviders/utils','YDSuh','server-error','MAhKS','clusterName','JSLMY','fleeU','4ZQTAHa','56566ATtLsv','warn','auth','command','options','5CNFsjk','Browserstack','delete'];a12_0x1edc=function(){return _0x4ed361;};return a12_0x1edc();}